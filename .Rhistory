library(rio)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- dash.rki.data[-(1:3)]
dash.rki.stand
dash.rki.data
library(rio)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- dash.rki.data[-(1:3),]
dash.rki.stand
dash.rki.data
max(row.names(dash.rki.data))
rownames(dash.rki.data)
library(rio)
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- dash.rki.data[-(1:3)]
dash.rki.stand
dash.rki.data
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- dash.rki.data[-(1:3),]
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data
str(dash.rki.data)
names(dash.rki.data)
class(dash.rki.data)
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),])
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data %>% tail()
class(dash.rki.data)
str(dash.rki.data)

dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame

# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data %>% head()
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau", "LK Passau")) %>%
dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=as.numeric(1))
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data %>% tail()
str(dash.rki.data)
row
row(dash.rki.data)
max(row(dash.rki.data))
max(row(dash.rki.data %>% filter(Dashboard.Inzidenz > 35)))
substring(dash.rki.stand, 6, 12)
substring(dash.rki.stand, 8, 16)
substring(dash.rki.stand, 8, 17)
as.date(substring(dash.rki.stand, 8, 17))
as.Date(substring(dash.rki.stand, 8, 17))
parse_date_time(substring(dash.rki.stand, 8, 17))
parse_date_time(substring(dash.rki.stand, 8, 17), order="dmy")
parse_date_time(dash.rki.stand, order="dmy")
parse_date_time(substring(dash.rki.stand, 8, 17), order="dmy")
as.Date(parse_date_time(substring(dash.rki.stand, 8, 17), order="dmy"))
library(rio)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data %>% head()
dash.rki.data[,2]
dash.rki.data[2,]
x <- dash.rki.data[2,]
x
names(dash.rki.data)
names(dash.rki.data) <- dash.rki.data[2,]
dash.rki.data %>% head()
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau", "LK Passau")) %>%
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data %>% tail()
dash.rki.data$Datum <- dash.rki.stand + max(row(dash.rki.data)) - row(dash.rki.data)
dash.rki.data %>% tail()
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.data %>% tail()
dash.rki.data$dash.Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.data %>% tail()
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
# dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.data %>% tail()
library(rio)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau", "LK Passau")) %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
names(dash.rki.data) <- dash.rki.data[2,]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% # rename(Dashboard.Inzidenz=1)
# dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.data %>% tail()
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau", "LK Passau")) %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
names(dash.rki.data) <- dash.rki.data[2,]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% # rename(Dashboard.Inzidenz=1)
# dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),]
head()
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>% head()
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2)
rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2, AGS=3) %>%
filter(Kreis %in% c("SK Passau", "LK Passau")) %>%
t() %>%
as.data.frame
dash.rki.data %>% head(10)
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),]
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
t()
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
t()
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t()
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf"))
names(dashdat) <- dashdat[2,]
dashdat <-  t(dashdat)
head(dashdat)
tail(dashdat)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf"))
names(dashdat) <- dashdat[2,]
dashdat <-  t(dashdat)
head(dashdat)
tail(dashdat)
dashdat[2,]
names(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
as.data.frame()
names(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
dashdat <-  t(dashdat)
head(dashdat)
tail(dashdat)
# dash.rki.stand <- row.names(dash.rki.data)[1]
names(dash.rki.data) <- dash.rki.data[2,]
names(dashdat) <- dashdat[2,]
str(dashdat)
dashdat <-  as.data.frame(t(dashdat))
str(dashdat)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
as.data.frame()
View(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
as.data.frame()
warnings()
names(dashdat)
t(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
dashdat <-  as.data.frame(t(dashdat))
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
head(dashdat)
tail(dashdat)
row(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
head(dashdat)
tail(dashdat)
dashdat.stand
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
head(dashdat)
tail(dashdat)
dashdat.stand
warnings()
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
head(dashdat)
tail(dashdat)
dashdat.stand
dashdat %>% pivot_longer(cols = 2:6, names_to ="Kreis")
dashdat %>% pivot_longer(names_to ="Kreis")
dashdat %>% pivot_longer(colls=1:5, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:5, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:6, names_to ="Kreis")
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat %>% pivot_longer(cols=1:6, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:5, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:5, names_to =c("Kreis","Datum")
)
dashdat[,1:6]
dashdat[,1:5]
dashdat[,1:5] <- round(as.numeric(dashdat[,1:5]),1)
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
dashdat[,1:6]
dashdat[1:5]  <- lapply(dashdat[1:5], round(1))
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
timeline
rmarkdown::render(
input = "Report.rmd",
envir = .GlobalEnv,
# output_format = "word_document",
output_file = paste0("./html/RKI_Report_09262-", Sys.Date() - 1, ".html"),
output_dir = paste0("html/", "09262")
)
tail(timeline)
tail(dashdat)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
tail(dashdat)
dashdat %>% select(Meldedatum, SK Passau)
dashdat %>% select(7,3)
dashdat %>% select(7,3) %>% merge(timeline)
dashdat %>% select(7,3) %>% merge(timeline, all.x=all)
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% # rename(Dashboard.Inzidenz=1)
# dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
timeline %>% ggplot(aes(x=Meldedatum, y=Inzidenz)) + geom_line() + geom_line(data=dashdat, aes(x=Meldedatum, y=SKPassau))
names(dashdat) <- c("SKPassau",
"LKPassau",
"LKFreyung-Grafenau",
"LKRottal-Inn",
"LKDeggendorf")
timeline %>% ggplot(aes(x=Meldedatum, y=Inzidenz)) + geom_line() + geom_line(data=dashdat, aes(x=Meldedatum, y=SKPassau))
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau",
"LKPassau",
"LKFreyung-Grafenau",
"LKRottal-Inn",
"LKDeggendorf")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
timeline %>% ggplot(aes(x=Meldedatum, y=Inzidenz)) + geom_line() + geom_line(data=dashdat, aes(x=Meldedatum, y=SKPassau))
=======
max(row.names(dash.rki.data))
dash.rki.stand
dash.rki.data %>% tail()
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.stand
dash.rki.data %>% tail()
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.stand
dash.rki.data %>% tail()
dash.rki.data
max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 35)]$Datum)
dash.rki.data[172]
dash.rki.data[172,]
max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 35),]$Datum)
dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 35),]$Datum)
dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 50),]$Datum)
dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 100),]$Datum)
dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 150),]$Datum)
dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 50),]$Datum)
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 50),]$Datum))
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 100),]$Datum))
dash.rki.data
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 60),]$Datum))
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 70),]$Datum))
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 80),]$Datum))
str(dash.rki.data)
dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(Dashboard.Inzidenz),1)
dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
str(dash.rki.data)
dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
dash.rki.stand
dash.rki.data %>% tail()
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 100),]$Datum))
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 150),]$Datum))
dash.rki.data <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis=="SK Passau") %>%
t() %>%
as.data.frame
# dash.rki.stand <- row.names(dash.rki.data)[1]
dash.rki.stand <- as.Date(parse_date_time(substring(row.names(dash.rki.data)[1], 8, 17), order="dmy"))
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% rename(Dashboard.Inzidenz=1)
dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
as.numeric(dash.rki.stand - max(dash.rki.data[which(dash.rki.data$Dashboard.Inzidenz >= 100),]$Datum))
dash.rki.stand
dash.rki.data %>% tail()
