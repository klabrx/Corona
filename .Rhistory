filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
as.data.frame()
View(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
as.data.frame()
warnings()
names(dashdat)
t(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
dashdat <-  as.data.frame(t(dashdat))
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
head(dashdat)
tail(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
head(dashdat)
tail(dashdat)
row(dashdat)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
head(dashdat)
tail(dashdat)
dashdat.stand
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
head(dashdat)
tail(dashdat)
dashdat.stand
warnings()
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
head(dashdat)
tail(dashdat)
dashdat.stand
dashdat %>% pivot_longer(cols = 2:6, names_to ="Kreis")
dashdat %>% pivot_longer(names_to ="Kreis")
dashdat %>% pivot_longer(colls=1:5, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:5, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:6, names_to ="Kreis")
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat %>% pivot_longer(cols=1:6, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:5, names_to ="Kreis")
dashdat %>% pivot_longer(cols=1:5, names_to =c("Kreis","Datum")
)
dashdat[,1:6]
dashdat[,1:5]
dashdat[,1:5] <- round(as.numeric(dashdat[,1:5]),1)
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
dashdat[,1:6]
dashdat[1:5]  <- lapply(dashdat[1:5], round(1))
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
timeline
rmarkdown::render(
input = "Report.rmd",
envir = .GlobalEnv,
# output_format = "word_document",
output_file = paste0("./html/RKI_Report_09262-", Sys.Date() - 1, ".html"),
output_dir = paste0("html/", "09262")
)
tail(timeline)
tail(dashdat)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- dashdat[2,]
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
tail(dashdat)
dashdat %>% select(Meldedatum, SK Passau)
dashdat %>% select(7,3)
dashdat %>% select(7,3) %>% merge(timeline)
dashdat %>% select(7,3) %>% merge(timeline, all.x=all)
dash.rki.data <- as.data.frame(dash.rki.data[-(1:3),]) %>% # rename(Dashboard.Inzidenz=1)
# dash.rki.data$Dashboard.Inzidenz <- round(as.numeric(dash.rki.data$Dashboard.Inzidenz),1)
dash.rki.data$Datum <- dash.rki.stand - max(row(dash.rki.data)) + row(dash.rki.data)
timeline %>% ggplot(aes(x=Meldedatum, y=Inzidenz)) + geom_line() + geom_line(data=dashdat, aes(x=Meldedatum, y=SKPassau))
names(dashdat) <- c("SKPassau",
"LKPassau",
"LKFreyung-Grafenau",
"LKRottal-Inn",
"LKDeggendorf")
timeline %>% ggplot(aes(x=Meldedatum, y=Inzidenz)) + geom_line() + geom_line(data=dashdat, aes(x=Meldedatum, y=SKPassau))
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau",
"LKPassau",
"LKFreyung-Grafenau",
"LKRottal-Inn",
"LKDeggendorf")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
timeline %>% ggplot(aes(x=Meldedatum, y=Inzidenz)) + geom_line() + geom_line(data=dashdat, aes(x=Meldedatum, y=SKPassau))
rmarkdown::render(
input = "Report.rmd",
envir = .GlobalEnv,
output_file = paste0("./html/RKI_Report_09262-", Sys.Date() - 1, ".html"),
output_dir = paste0("html/", "09262")
)
rmarkdown::render(
input = "FlexDash.rmd",
envir = .GlobalEnv,
output_file = paste0("./html/Flexdashboard-", Sys.Date() - 1, ".html"),
output_dir = paste0("html/", "09262")
)
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau",
"LKPassau",
"LKFreyung-Grafenau",
"LKRottal-Inn",
"LKDeggendorf")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
head(dashdat[c(1,5),])
head(dashdat[,c(1,5)])
head(dashdat[,c(1,7)])
head(dashdat[,c(1,6)])
head(dashdat[,c(1,7)])
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau",
"LKPassau",
"LKFreyung-Grafenau",
"LKRottal-Inn",
"LKDeggendorf")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
dashdat[,c(1,7)])
dashdat
tail(dashdat(100))
tail(dashdat,100)
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau",
"LK Passau",
"LK Freyung-Grafenau",
"LK Rottal-Inn",
"LK Deggendorf")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
# names(dashdat) <- c("SKPassau",
#                    "LKPassau",
#                    "LKFreyung-Grafenau",
#                    "LKRottal-Inn",
#                    "LKDeggendorf")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1:5]  <- lapply(dashdat[1:5], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau")
View(dashdat)
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1]  <- lapply(dashdat[1], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
# dashdat erzeugen
url <- "https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.xlsx?__blob=publicationFile"
dashdat <- rio::import(file = url,which = 7)[-(1:4),] %>%
as.data.frame() %>%
rename(Kreis=2) %>%
filter(Kreis %in% c("SK Passau")) %>%
t() %>%
as.data.frame()
dashdat.stand <- as.Date(parse_date_time(substring(row.names(dashdat)[1], 8, 17), order="dmy"))
names(dashdat) <- c("SKPassau")
dashdat <- dashdat[-(1:3),]
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat$Meldedatum <- dashdat$Datum-1
dashdat[1,]  <- lapply(dashdat[1,], as.numeric)
head(dashdat)
tail(dashdat)
dashdat.stand
head(dashdat)
tail(dashdat)
dashdat[1,]  <- lapply(dashdat[1,], as.numeric)
dashdat[,1]  <- lapply(dashdat[,1], as.numeric)
dashdat$V1  <- lapply(dashdat$V1, as.numeric)
dashdat$V1  <- as.numeric(dashdat$V1)
class(dashdat)
str(dashdat)
dashdat <- as.numeric(dashdat)
str(dashdat)
dashdat  <- as.data.frame(as.numeric(dashdat))
names(dashdat)
names(dashdat)
names(dashdat)
names(dashdat) <- c("Inzidenz.Dashboard")
names(dashdat)
dashdat
row(dashdat)
dashdat %>% mutate(Zeile=row())
dashdat %>% mutate(Zeile=row)
dashdat$Zeile <- row(dashdat)
dashdat
dashdat.stand
dashdat$Datum <- dashdat.stand - max(row(dashdat)) + row(dashdat)
dashdat.stand
dashdat
str(dashdat)
head(timeline)
head(dashdat)
merge(dashdat, timeline)
merge(dashdat, timeline, by=Meldedatum)
head(dashdat)
tail(dashdat)
head(dashdat)
tail(dashdat)
dashdat.stand
dashdat$Meldedatum <- dashdat$Datum-1
head(dashdat)
tail(dashdat)
dashdat.stand
merge(dashdat, timeline)
merge.data.frame(timeline,dashdat, all.y = TRUE)
